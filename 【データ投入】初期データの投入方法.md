# データ投入: 初期データの投入方法

## ✅ 確認済み

- テーブルはすべて存在している
- 今日（2025-12-18）のデータは0件（正常な状態）

---

## 🎯 次のステップ: データを投入する

データが存在しないので、データを投入する必要があります。

---

## 📋 データ投入方法

### 方法1: `/lab` ページから実データ取得（推奨）

1. **メンテUIにアクセス**
   - https://space-mood-oracle.vercel.app/lab にアクセス

2. **「実データ取得（NOAA）」ボタンをクリック**
   - 今日の宇宙天気データを取得
   - これで `space_weather_data` テーブルにデータが入ります

3. **「宇宙モデル更新」ボタンをクリック**
   - 過去90日分のデータで推論モデルを学習
   - これで `predictions` テーブルにデータが入ります
   - **ただし、この時点で過去の集合意識データ（Hacker Newsの感情スコア）が必要です**

4. **公開UIを再読み込み**
   - https://space-mood-oracle.vercel.app にアクセス
   - データが表示されるか確認

---

### 方法2: 過去の集合意識データが必要な場合

もし「宇宙モデル更新」で「学習データが不足しています」と表示された場合：

#### オプションA: CSVアップロード

1. `/lab` ページからCSVをアップロード
2. 過去の日別ムードデータを投入

#### オプションB: Pythonスクリプトで取得

1. `data_sources/get-hn-mood.py` を実行
2. Hacker Newsの過去データを取得
3. CSVを生成してアップロード

---

## 🔍 APIを直接確認（デバッグ用）

ブラウザで以下のURLにアクセスして、APIが正常に動作しているか確認：

```
https://space-mood-oracle.onrender.com/api/trpc/oracle.getTodayFortune?input={"json":null}
```

**期待される結果（データが存在しない場合）:**
```json
{
  "result": {
    "data": {
      "json": {
        "date": "2025-12-18",
        "sentiment": null,
        "spaceWeather": null,
        "prediction": null
      }
    }
  }
}
```

**データが存在する場合:**
```json
{
  "result": {
    "data": {
      "json": {
        "date": "2025-12-18",
        "sentiment": { ... },
        "spaceWeather": { ... },
        "prediction": { ... }
      }
    }
  }
}
```

---

## 📝 確認事項

### データ投入前

- ✅ テーブルが存在する
- ✅ データが0件（正常な状態）
- ⚠️ 公開UIで「データ取得エラー」が表示されている（これはエラーハンドリングの問題かもしれません）

### データ投入後

- データが表示されるか確認
- エラーが解消されたか確認

---

**まず、`/lab` ページから「実データ取得（NOAA）」を実行してデータを投入してください！** 🚀

