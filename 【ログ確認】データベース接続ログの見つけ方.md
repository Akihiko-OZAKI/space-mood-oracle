# ログ確認: データベース接続ログの見つけ方

## 📋 確認すべきログメッセージ

これは**SQLクエリではなく、データベース接続時のログメッセージ**です。

---

## 🔍 ログの探し方

### ステップ1: RenderのLogsタブでサーバー起動時のログを探す

RenderのLogsタブを開いて、**サーバーが起動したとき**のログを探してください。

**探すべきタイミング:**
- サービスが起動した直後
- デプロイが完了した直後
- 例: `01:52:29 PM` や `01:56:06 PM` あたり

---

### ステップ2: データベース接続ログを探す

以下のようなログメッセージを探してください：

```
[Database] Initializing MySQL pool with TLS to mysql://gateway01.ap-northeast-1.prod.aws.tidbcloud.com:4000/test
```

または

```
[Database] Initializing MySQL pool with TLS to mysql://gateway01.ap-northeast-1.prod.aws.tidbcloud.com:4000/space_mood_oracle
```

---

### ステップ3: データベース名を確認

ログの最後の部分（`/` の後）がデータベース名です：

- `/test` → `test` データベースに接続
- `/space_mood_oracle` → `space_mood_oracle` データベースに接続

---

## 🎯 現在の状況

添付画像のログを見ると：
- `02:11:04 PM` にデータベースエラーが発生
- `Error: Table 'test.space_weather_data' doesn't exist`

これは、`test` データベースに接続しようとしているが、テーブルが見つからないということです。

---

## 🔧 確認方法

### 方法1: ログをスクロールして探す

1. RenderのLogsタブで、**一番上までスクロール**
2. サーバーが起動したとき（例: `01:52:29 PM`）のログを見る
3. `[Database] Initializing MySQL pool with TLS to` というメッセージを探す

---

### 方法2: 検索機能を使う

RenderのLogsタブに検索ボックスがある場合は、以下を検索：

```
Initializing MySQL pool
```

または

```
Database] Initializing
```

---

### 方法3: ログの時刻で特定

データベース接続ログは、通常以下のような順序で表示されます：

1. `Server running on http://localhost:10000/`
2. `[Database] Initializing MySQL pool with TLS to mysql://...:4000/???`
3. `[Database] Connection object created successfully.`

---

## 📝 次のステップ

ログで `[Database] Initializing MySQL pool with TLS to` の行を見つけたら：
1. データベース名（`/` の後）を確認
2. `/test` になっているか確認
3. もし `/test` になっていない場合、`DATABASE_URL` 環境変数を再確認

---

**RenderのLogsタブで、サーバー起動時のログ（例: `01:52:29 PM` や `01:56:06 PM`）を確認して、`[Database] Initializing MySQL pool with TLS to` というメッセージを探してください！** 🔍

