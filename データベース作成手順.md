# 📦 データベース作成手順

## 📋 現在の状況

データベース自体が存在しない場合は、**まずデータベースを作成**してから、テーブルを作成するマイグレーションを実行する必要があります。

---

## 🎯 手順（2ステップ）

### ステップ1: データベースを作成

データベース名: `space_mood_oracle`

#### 方法A: phpMyAdminで作成

1. phpMyAdminにログイン
2. 「データベース」タブをクリック
3. 「データベースを作成する」セクションで:
   - データベース名: `space_mood_oracle`
   - 照合順序: `utf8mb4_general_ci` (推奨)
4. 「作成」ボタンをクリック
5. 完了！ ✅

#### 方法B: MySQLコマンドラインで作成

```sql
CREATE DATABASE space_mood_oracle CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
```

または、MySQL CLIで直接実行:

```bash
mysql -u root -p
```

その後、MySQLプロンプトで:

```sql
CREATE DATABASE space_mood_oracle CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;
exit;
```

#### 方法C: MySQL Workbenchで作成

1. MySQL Workbenchを起動
2. データベースに接続
3. 左側のナビゲーターで「Databases」を右クリック
4. 「Create Schema...」を選択
5. Schema名: `space_mood_oracle`
6. Default Collation: `utf8mb4_general_ci`
7. 「Apply」をクリック

---

### ステップ2: テーブルを作成（マイグレーション）

データベースが作成できたら、次にテーブルを作成します。

1. **ファイルを開く**: `マイグレーション実行SQL.sql`
2. **SQLをコピー**（3つのCREATE TABLE文）
3. **データベースを選択**してから実行:
   - phpMyAdmin: 左側で `space_mood_oracle` を選択 → SQLタブ
   - MySQL Workbench: クエリエディタで `USE space_mood_oracle;` を追加
   - コマンドライン: `mysql -u user -p space_mood_oracle < マイグレーション実行SQL.sql`

---

## 🔧 環境変数の設定

データベース作成後、`.env` ファイルを作成/更新:

```env
# データベース接続情報
DATABASE_URL=mysql://ユーザー名:パスワード@localhost:3306/space_mood_oracle

# 例:
# DATABASE_URL=mysql://root:password@localhost:3306/space_mood_oracle
# DATABASE_URL=mysql://user:pass123@localhost:3306/space_mood_oracle
```

**接続文字列の形式:**
```
mysql://[ユーザー名]:[パスワード]@[ホスト]:[ポート]/[データベース名]
```

---

## ✅ 作成後の確認

データベースとテーブルが作成されたことを確認:

```sql
-- データベース一覧を確認
SHOW DATABASES;

-- データベースを選択
USE space_mood_oracle;

-- テーブル一覧を確認
SHOW TABLES;

-- 期待される結果:
-- google_trend_data
-- twitter_trend_data
-- daily_mood_judgment
-- （既存のテーブルも表示される）
```

---

## 🆘 よくあるエラー

### "Access denied"

**原因**: データベースへのアクセス権限がない

**解決策**: 
- 管理者権限でログインする
- または、新しいユーザーを作成して権限を付与:

```sql
CREATE USER 'space_oracle_user'@'localhost' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON space_mood_oracle.* TO 'space_oracle_user'@'localhost';
FLUSH PRIVILEGES;
```

### "Database already exists"

**原因**: 既にデータベースが存在する

**解決策**: 問題ありません。そのままステップ2（テーブル作成）に進んでください。

---

## 📝 まとめ

1. ✅ **データベースを作成** (`space_mood_oracle`)
2. ✅ **テーブルを作成** (`マイグレーション実行SQL.sql` を実行)
3. ✅ **環境変数を設定** (`.env` ファイルに `DATABASE_URL`)
4. ✅ **動作確認** (サーバー起動 → APIテスト)

---

**データベース作成後は、`マイグレーション実行SQL.sql` を実行してテーブルを作成してください！** 🚀

